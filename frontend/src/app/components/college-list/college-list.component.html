<div>
    <div class="toolbar glass-card">
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text" placeholder="Search by college name, city..." [(ngModel)]="searchTerm"
                (input)="applyFilters()">
        </div>
        <div class="filter-group">
            <select [(ngModel)]="filterType" (change)="applyFilters()">
                <option value="">All Types</option>
                <option value="Government">Government Institutions</option>
                <option value="Private">Private Institutions</option>
            </select>
        </div>
    </div>


    <div class="college-grid">
        <div class="college-item" *ngFor="let college of filteredColleges; let i = index">

            <div class="flex-between">
                <div class="college-badge" [class.govt]="college.type === 'Government'">
                    {{ college.type }}
                </div>
                <div class="code-badge" *ngIf="college.code">Code: {{ college.code }}</div>
            </div>
            <h3>{{ college.name }}</h3>

            <div class="college-meta">
                <div class="meta-info">
                    <a [href]="college.location_url" target="_blank" class="location-link"
                        style="display: flex; align-items: center; gap: 4px; color: inherit; text-decoration: none; border-bottom: 1px dotted rgba(255,255,255,0.3); transition: border-color 0.2s;">
                        <span>ğŸ“</span> {{ college.location }}
                    </a>
                </div>
                <div class="meta-info">
                    <span>ğŸ›ï¸</span> {{ college.affiliated_to }}
                </div>
                <div class="meta-info">
                    <span>ğŸ’°</span> Fees: {{ college.fees_btech / 100000 | number:'1.1-1' }}L
                </div>
                <div class="meta-info">
                    <span>ğŸ“ˆ</span> Placement Avg: {{ college.avg_package / 100000 | number:'1.1-1' }}L
                </div>
            </div>

            <div class="flex-between mt-2" style="margin-bottom: 1.25rem;">
                <a *ngIf="college.website" [href]="college.website" target="_blank" class="website-link">
                    <span>ğŸŒ</span> Site
                </a>
                <a [href]="college.location_url" target="_blank" class="map-link" style="text-decoration: none;">
                    <span>ğŸ“</span> View on Map
                </a>
            </div>

            <button class="btn btn-primary" style="width: 100%;" [routerLink]="['/details', college._id]">
                View Full Profile
            </button>
        </div>
    </div>

    <!-- No Results State -->
    <div class="text-center animate-fade-in" style="padding: 4rem 2rem;"
        *ngIf="!isLoading && filteredColleges.length === 0">
        <div style="font-size: 4rem; margin-bottom: 1.5rem;">ğŸ”</div>
        <h2 style="font-size: 1.75rem; margin-bottom: 0.5rem;">No Institutions Found</h2>
        <p style="color: var(--text-muted);">Try adjusting your search terms or filters.</p>
        <button class="btn btn-secondary mt-4" (click)="searchTerm = ''; filterType = ''; applyFilters()">
            Clear All Filters
        </button>
    </div>
</div>